<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registrarse</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" th:href="@{/resources/alertifyjs/css/alertify.css}">
<link rel="stylesheet" th:href="@{/resources/alertifyjs/css/alertify.min.css}"> 

  	
<style type="text/css">
	:root{
	  --main-bg:#0dcaf0;
	}
	
	.main-bg {
	 background-image: url("https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&q=80&w=1000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxleHBsb3JlLWZlZWR8MXx8fGVufDB8fHx8fA%3D%3D");
		background-repeat: no-repeat;
    background-size: cover;
	}
	
	input:focus, button:focus {
	  border: 1px solid var(--main-bg) !important;
	  box-shadow: none !important;
	}
	
	.form-check-input:checked {
	  background-color: var(--main-bg) !important;
	  border-color: var(--main-bg) !important;
	}
	
	.card, .btn, input{
	  border-radius:2% !important;
	}



.help-block{
	 color: red;
	 /*display: none;*/
	}
	.form-group.has-error .form-control-label {
	  color: red;
	}
	.form-group.has-error .form-control {
	  border: 1px solid red;
	  box-shadow: 0 0 0 0.2rem rgba(250, 16, 0, 0.18);
	}
	
	.alertify .ajs-dialog {
	    top: 50%;
	    transform: translateY(-50%);
	    margin: auto;
	}
</style>
</head>
<body class="main-bg">
  <!-- Login Form -->
  <div class="container">
    <div class="row justify-content-center" style="margin-top: 80px!important ">
      <div class="col-lg-9 col-md-6 col-sm-6">
        <div class="card shadow">
          <div class="card-title text-center border-bottom">
            <h2 class="p-3">REGISTRARSE</h2>
          </div>
          <div class="card-body">
            <form method="post" id="idRegistra" th:action="@{/sesion/registrarse}">
    <div class="row">
        <div class="form-group has-feedback col-md-6">
            <label for="text" class="form-label font-weight-bold">Nombre</label>
            <input type="text" class="form-control" id="nombre" name="nombre"/>
        </div>
        <div class="form-group has-feedback col-md-6">
            <label for="text" class="form-label font-weight-bold">Apellido</label>
            <input type="text" class="form-control" id="apellido" name="apellido"/>
        </div>
    </div>
    <div class="form-group has-feedback col-md-12">
        <label for="text" class="form-label font-weight-bold">Correo</label>
        <input type="text" class="form-control" id="correo" name="correo"/>
    </div>
    <div class="form-group has-feedback col-md-12">
        <label for="text" class="form-label font-weight-bold">DNI</label>
        <input type="text" class="form-control" id="dni" name="dni"/>
    </div>
    <div class="form-group has-feedback col-md-12">
        <label for="password" class="form-label font-weight-bold">Usuario</label>
        <input type="text" class="form-control" id="login" name="login"/>
    </div>
    <div class="form-group has-feedback col-md-12">
        <label for="password" class="form-label font-weight-bold">Contraseña</label>
        <input type="password" class="form-control" id="password" name="password"/>
    </div>
    <div class="row justify-content-center">
        <button type="submit" class="btn btn-success">Registrarse</button>
    </div>
</form>
            
          </div>
        </div>
      </div>
    </div>
     
    	
			
		
  </div>

  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-validator/0.5.3/js/bootstrapValidator.js"></script>
	<script th:src="@{/resources/datepicker/bootstrap-datepicker.js}"></script>     
	<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
	<script src="https://kit.fontawesome.com/08aaa156fb.js" crossorigin="anonymous"></script>
	<script	src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
	<script src="https://kit.fontawesome.com/08aaa156fb.js" crossorigin="anonymous"></script>
	<script th:src="@{/resources/alertifyjs/alertify.js}"></script>
	<script th:src="@{/resources/alertifyjs/alertify.min.js}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  
  
  
  <script th:inline="javascript" th:if="${MENSAJE!=null}">
		//leer atributo mensaje 
		let msj=/*[[${MENSAJE}]]*/
		
	toastr.success(msj, toastr.options = {
	"timeOut": "2000",
	"positionClass " : " toast-top-right ",
	});
		
	</script>
	
	
	<script th:inline="javascript">
    $(document).ready(function() {
        $('#idRegistra').bootstrapValidator({
            fields: {
                nombre: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese el nombre'
                        }
                    }
                },
                apellido: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese el apellido'
                        }
                    }
                },
                correo: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese el correo electrónico'
                        },
                        emailAddress: {
                            message: 'Ingrese un correo electrónico válido'
                        }
                    }
                },
                dni: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese el DNI'
                        },
                        stringLength: {
                            min: 8,
                            max: 8,
                            message: 'El DNI debe tener exactamente 8 dígitos'
                        },
                        regexp: {
                            regexp: /^[0-9]+$/,
                            message: 'Ingrese solo números'
                        },
                        remote: {
                            url: '/sesion/existeDni/{dni}', // URL sin el valor del DNI
                            message: 'El DNI ya está registrado',
                            method: 'GET',
                            delay: 500,
                            data: function() {
                                return {
                                    dni: $('#dni').val() // Obtiene el valor del campo DNI
                               }
                            }
                        }
                    }
                },
                
                login: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese la Cuenta'
                        }
                    }
                },
                password: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, ingrese la Clave'
                        },
                        stringLength: {
                            min: 6,
                            message: 'La Clave debe tener al menos 6 caracteres'
                        },
                        regexp: {
                            regexp: /^(?=.*[A-Z])(?=.*\d).{6,}$/,
                            message: 'La Clave debe contener al menos una mayúscula, un número y tener al menos 6 caracteres'
                        }
                    }
                },
                rol: {
                    validators: {
                        notEmpty: {
                            message: 'Por favor, seleccione un Rol'
                        }
                    }
                }
           
                
                
            }
        });
    });
</script>
</body>

</html>


